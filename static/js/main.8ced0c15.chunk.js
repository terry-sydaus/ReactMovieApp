(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){},29:function(e,t,a){e.exports=a(67)},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(25),c=a.n(r),i=(a(34),a(12)),l=a(11),s=(a(35),function(){return o.a.createElement("header",null,o.a.createElement("h1",null,"Sweet Pumpkins"))}),m=a(15),u=a(17),g=a(5),p=a(6),v=a(8),h=a(7),d=a(9),f=(a(36),a(37),function(e){var t=e.genre,a=e.onGenreChange,n=e.genres;return o.a.createElement("div",{className:"selection"},o.a.createElement("label",null,"Genre"),o.a.createElement("select",{value:t,onChange:a},n.map(function(e){return o.a.createElement("option",{key:e.id,value:e.name},e.name)})))}),E=a(26),b=a.n(E),y=(a(55),a(56),function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).onChange=function(e){console.log(e),a.props.onChange({type:a.props.data.label,value:e})},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.min,a=e.max,n=e.step,r=e.value,c=e.label;return o.a.createElement("div",{className:"slider"},o.a.createElement("label",null,c),o.a.createElement(b.a,{minValue:t,maxValue:a,step:n,onChange:this.onChange,value:r}))}}]),t}(o.a.Component)),k=(a(23),function(e){var t=e.onClick,a=e.children;return o.a.createElement("div",{className:"search-button"},o.a.createElement("button",{onClick:t},a))}),_=(a(57),function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).tempFunction=function(e){console.log(e.genres)},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setGenres,a=e.genres,n="https://api.themoviedb.org/3/genre/movie/list?api_key=".concat("3da8e44acd35ad6e614f8fa73ec00473","&language=en-US");fetch(n).then(function(e){return e.json()}).then(function(e){return t(e.genres)},function(){console.log(a)}).catch(function(e){return console.log(e)})}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.genre,a=e.genres,n=e.onGenreChange,r=e.onChange,c=e.onSearchButtonClick,i=e.year,l=e.rating,s=e.runtime;return o.a.createElement("section",{className:"navigation"},o.a.createElement(f,{genres:a,genre:t,onGenreChange:n}),o.a.createElement(y,{data:i,onChange:r}),o.a.createElement(y,{data:l,onChange:r}),o.a.createElement(y,{data:s,onChange:r}),o.a.createElement(k,{onClick:c},"Search"))}}]),t}(o.a.Component)),C=(a(58),a(59),function(e){var t=e.movie,a=t.id,n=t.title,r=t.poster_path,c=t.release_date,l=t.vote_average,s="https://image.tmdb.org/t/p/w342/".concat(r),m="".concat(c).substring(0,4);return o.a.createElement("li",{className:"movie-item"},o.a.createElement(i.b,{to:"/movies/".concat(a),className:"thumbnail"},o.a.createElement("img",{src:s,alt:n}),o.a.createElement("div",{className:"movie-description"},o.a.createElement("h2",null,n),o.a.createElement("section",{className:"movie-details"},o.a.createElement("div",{className:"movie-year"},o.a.createElement("span",{className:"title"},"Year"),o.a.createElement("span",null,m)),o.a.createElement("div",{className:"movie-rating"},o.a.createElement("span",{className:"title"},"Rating"),o.a.createElement("span",null,l))))))}),S=function(e){var t=e.movies,a=e.page,n=e.onPageIncrease,r=e.onPageDecrease;return o.a.createElement("section",null,o.a.createElement("div",{className:"pagination"},o.a.createElement(k,{onClick:r},"Previous"),o.a.createElement("span",null,"Page ".concat(a)),o.a.createElement(k,{onClick:n},"Next")),o.a.createElement("ul",{className:"movies"},t.map(function(e){return o.a.createElement(C,{key:e.id,movie:e})})),o.a.createElement("div",{className:"pagination"},o.a.createElement(k,{onClick:r},"Previous"),o.a.createElement("span",null,"Page ".concat(a)),o.a.createElement(k,{onClick:n},"Next")))},j=function(){return o.a.createElement("h2",null,"Loading Movie")},O=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={genre:"Comedy",genres:[],moviesUrl:"https://api.themoviedb.org/3/discover/movie?api_key=".concat("3da8e44acd35ad6e614f8fa73ec00473","&language=en-US&sort_by=popularity.desc&include_adult=true&include_video=false&page=1"),movies:[],page:1,total_pages:1,year:{label:"year",min:1980,max:2019,step:1,value:{min:2e3,max:2017}},rating:{label:"rating",min:0,max:10,step:1,value:{min:8,max:10}},runtime:{label:"runtime",min:0,max:300,step:15,value:{min:60,max:120}},isLoading:!0},a.saveStateToLocalStorage=function(){localStorage.setItem("sweetpumpkins.params",JSON.stringify(a.state))},a.getStateFromLocalStorage=function(){return JSON.parse(localStorage.getItem("sweetpumpkins.params"))},a.fetchMovies=function(e){fetch(e).then(function(e){return e.json()}).then(function(e){return a.storeMovies(e)}).catch(function(e){return console.log(e)})},a.storeMovies=function(e){var t=e.results.map(function(e){return{vote_count:e.vote_count,id:e.id,genre_ids:e.genre_ids,poster_path:e.poster_path,title:e.title,vote_average:e.vote_average,release_date:e.release_date}});a.setState({movies:t,total_pages:e.total_pages,isLoading:!1})},a.generateUrl=function(e){var t=e.genres,n=e.year,o=e.rating,r=e.runtime,c=e.page,i=t.find(function(t){return t.name===e.genre}).id,l="https://api.themoviedb.org/3/discover/movie?"+"api_key=".concat("3da8e44acd35ad6e614f8fa73ec00473","&")+"language=en-US&sort_by=popularity.desc&"+"with_genres=".concat(i,"&")+"primary_release_date.gte=".concat(n.value.min,"-01-01&")+"primary_release_date.lte=".concat(n.value.max,"-12-31&")+"vote_average.gte=".concat(o.value.min,"&")+"vote_average.lte=".concat(o.value.max,"&")+"with_runtime.gte=".concat(r.value.min,"&")+"with_runtime.lte=".concat(r.value.max,"&")+"page=".concat(c);a.setState({moviesUrl:l})},a.onGenreChange=function(e){a.setState({genre:e.target.value})},a.onChange=function(e){a.setState(Object(m.a)({},e.type,Object(u.a)({},a.state[e.type],{value:e.value})))},a.setGenres=function(e){a.setState({genres:e})},a.onSearchButtonClick=function(e){a.setState({page:1}),a.generateUrl(a.state)},a.onPageIncrease=function(){var e=a.state,t=e.page+1;t<=e.total_pages&&a.setState({page:t})},a.onPageDecrease=function(){var e=a.state.page-1;e>0&&a.setState({page:e})},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.getStateFromLocalStorage();!e||e&&!e.movies.length?(this.fetchMovies(this.state.moviesUrl),console.log("Mount component did mount")):(this.setState(Object(u.a)({},e)),this.generateUrl(e))}},{key:"componentDidUpdate",value:function(e,t,a){this.saveStateToLocalStorage(),console.log("Main component did update..."),"moviesUrl"in t&&this.state.moviesUrl!==t.moviesUrl&&(console.log("Main component did update...--\x3e moviesUrl change"),this.fetchMovies(this.state.moviesUrl)),"page"in t&&this.state.page!==t.page&&(console.log("Main component did update...--\x3e page change"),this.generateUrl(this.state))}},{key:"render",value:function(){return console.log("Main component render to v dom"),console.log("Page number for Main component render is "+this.state.page),o.a.createElement("section",{className:"main"},o.a.createElement(_,Object.assign({onGenreChange:this.onGenreChange,onChange:this.onChange,setGenres:this.setGenres,onSearchButtonClick:this.onSearchButtonClick},this.state)),this.state.isLoading?o.a.createElement(j,null):o.a.createElement(S,{movies:this.state.movies,page:this.state.page,onPageIncrease:this.onPageIncrease,onPageDecrease:this.onPageDecrease}))}}]),t}(o.a.Component),N=(a(66),function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={movie:{},isLoading:!0},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.movieId,a="https://api.themoviedb.org/3/movie/".concat(t,"?api_key=").concat("3da8e44acd35ad6e614f8fa73ec00473","&language=en-US");fetch(a).then(function(e){return e.json()}).then(function(t){return e.setState({movie:t,isLoading:!1})}).catch(function(e){return console.log("Error:",e)})}},{key:"render",value:function(){var e=this.state.movie,t=e.title,a=e.backdrop_path,n=e.release_date,r=e.genres,c=e.overview,i=e.vote_average,l=e.runtime,s=n?n.substring(0,4):null,m="https://image.tmdb.org/t/p/w1280/".concat(a),u={backgroundImage:"url(".concat(m,")")};return console.log(t),console.log(u),o.a.createElement("div",{className:"movie-page"},this.state.isLoading?o.a.createElement(j,null):o.a.createElement("div",null,o.a.createElement("div",{className:"movie-backdrop",style:u}),o.a.createElement("div",{className:"movie-details"},o.a.createElement("h1",null,t,o.a.createElement("span",null,"(",s,")")),o.a.createElement("section",{className:"genres"},r.map(function(e,t){return o.a.createElement("div",{key:e.id},o.a.createElement("span",null,e.name),t<r.length-1&&o.a.createElement("span",{className:"separator"},"|"))})),o.a.createElement("h5",null,"Rating:",o.a.createElement("span",null,i)),o.a.createElement("h5",null,"Runtime:",o.a.createElement("span",null,"".concat(l," min"))),o.a.createElement("h4",null,"Overview"),o.a.createElement("p",null,c))))}}]),t}(o.a.Component)),w=function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"We couldn't find what you were looking for :("),o.a.createElement(i.b,{to:"/"},"Here you can browse the movies"))},U=function(){return console.log("API key for TJM:","3da8e44acd35ad6e614f8fa73ec00473"),o.a.createElement(i.a,{basename:"https://terry-sydaus.github.io/ReactMovieApp"},o.a.createElement("div",null,o.a.createElement(s,null),o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/",component:O}),o.a.createElement(l.a,{path:"/movies/:movieId",component:N}),o.a.createElement(l.a,{component:w}))))};c.a.render(o.a.createElement(U,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.8ced0c15.chunk.js.map